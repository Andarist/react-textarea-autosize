!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("prop-types")):"function"==typeof define&&define.amd?define(["react","prop-types"],t):e.TextareaAutosize=t(e.React,e.PropTypes)}(this,function(e,t){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function o(e,t,n,o,i){void 0===n&&(n=!1),void 0===o&&(o=null),void 0===i&&(i=null),null===a.parentNode&&document.body.appendChild(a);var d=function(e,t,n){void 0===n&&(n=!1);if(n&&u[t])return u[t];var o=window.getComputedStyle(e);if(null===o)return null;var i=h.reduce(function(e,t){return e[t]=o.getPropertyValue(t),e},{}),a=i["box-sizing"];r&&"border-box"===a&&(i.width=parseFloat(i.width)+parseFloat(o["border-right-width"])+parseFloat(o["border-left-width"])+parseFloat(o["padding-right"])+parseFloat(o["padding-left"])+"px");var s={sizingStyle:i,paddingSize:parseFloat(i["padding-bottom"])+parseFloat(i["padding-top"]),borderSize:parseFloat(i["border-bottom-width"])+parseFloat(i["border-top-width"]),boxSizing:a};n&&(u[t]=s);return s}(e,t,n);if(null===d)return null;var l=d.paddingSize,p=d.borderSize,c=d.boxSizing,f=d.sizingStyle;Object.keys(f).forEach(function(e){a.style[e]=f[e]}),Object.keys(s).forEach(function(e){a.style.setProperty(e,s[e],"important")}),a.value=e.value||e.placeholder||"x";var g=-1/0,m=1/0,b=a.scrollHeight;"border-box"===c?b+=p:"content-box"===c&&(b-=l),a.value="x";var y=a.scrollHeight-l;null===o&&null===i||(null!==o&&(g=y*o,"border-box"===c&&(g=g+l+p),b=Math.max(g,b)),null!==i&&(m=y*i,"border-box"===c&&(m=m+l+p),b=Math.min(m,b)));return{height:b,minHeight:g,maxHeight:m,rowCount:Math.floor(b/y)}}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var i="undefined"!=typeof window&&"undefined"!=typeof document,r=!!i&&!!document.documentElement.currentStyle,a=i&&document.createElement("textarea"),s={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},h=["letter-spacing","line-height","font-family","font-weight","font-size","font-style","tab-size","text-rendering","text-transform","width","text-indent","padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-right-width","border-bottom-width","border-left-width","box-sizing"],u={},d=function(e){return void 0===e&&(e=0),function(){return++e}}(),l=function(){},p=i&&window.requestAnimationFrame?[window.requestAnimationFrame,window.cancelAnimationFrame]:[setTimeout,clearTimeout],c=p[0],f=p[1],g=function(t){function i(e){var n;return n=t.call(this,e)||this,n._resizeLock=!1,n._onRootDOMNode=function(e){n._rootDOMNode=e,n.props.inputRef&&n.props.inputRef(e)},n._onChange=function(e){n._controlled||n._resizeComponent(),n.props.onChange(e)},n._resizeComponent=function(e){if(void 0===e&&(e=l),void 0!==n._rootDOMNode){var t=o(n._rootDOMNode,n._uid,n.props.useCacheForDOMMeasurements,n.props.minRows,n.props.maxRows);if(null!==t){var i=t.height,r=t.minHeight,a=t.maxHeight;n.rowCount=t.rowCount,n.state.height===i&&n.state.minHeight===r&&n.state.maxHeight===a?e():n.setState({height:i,minHeight:r,maxHeight:a},e)}else e()}else e()},n.state={height:e.style&&e.style.height||0,minHeight:-1/0,maxHeight:1/0},n._uid=d(),n._controlled="string"==typeof e.value,n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(i,t);var r=i.prototype;return r.render=function(){var t=this.props,o=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;r.length>o;o++)0>t.indexOf(n=r[o])&&(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;a.length>o;o++)0>t.indexOf(n=a[o])&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,["minRows","maxRows","onHeightChange","useCacheForDOMMeasurements","inputRef"]);o.style=n({},o.style,{height:this.state.height});var i=Math.max(o.style.maxHeight||1/0,this.state.maxHeight);return this.state.height>i&&(o.style.overflow="hidden"),e.createElement("textarea",n({},o,{onChange:this._onChange,ref:this._onRootDOMNode}))},r.componentDidMount=function(){var e=this;this._resizeComponent(),this._resizeListener=function(){e._resizeLock||(e._resizeLock=!0,e._resizeComponent(function(){return e._resizeLock=!1}))},window.addEventListener("resize",this._resizeListener)},r.componentWillReceiveProps=function(){var e=this;this._clearNextFrame(),this._onNextFrameActionId=c(function(){return e._resizeComponent()})},r.componentDidUpdate=function(e,t){this.state.height!==t.height&&this.props.onHeightChange(this.state.height,this)},r.componentWillUnmount=function(){this._clearNextFrame(),window.removeEventListener("resize",this._resizeListener),function(e){delete u[e]}(this._uid)},r._clearNextFrame=function(){f(this._onNextFrameActionId)},i}(e.Component);return g.propTypes={value:t.string,onChange:t.func,onHeightChange:t.func,useCacheForDOMMeasurements:t.bool,minRows:t.number,maxRows:t.number,inputRef:t.func},g.defaultProps={onChange:l,onHeightChange:l,useCacheForDOMMeasurements:!1},g});
